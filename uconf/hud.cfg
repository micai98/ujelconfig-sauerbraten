// part of ujelconfig by micai
// github.com/micai98/ujelconfig-sauerbraten

// this is really bad i will rewrite this whole file later

gamehud_apply = [
	gamehud_string = ""
	if (= $gamehud_showfrags 1) [ gamehud_string = (concat $gamehud_string (concatword "^f7frags ^f" $gamehud_color "%1^n")) ]
	if (= $gamehud_showdeaths 1) [ gamehud_string = (concat $gamehud_string (concatword "^f7deaths ^f" $gamehud_color "%2^n")) ]
	if (= $gamehud_showkd 1) [ gamehud_string = (concat $gamehud_string (concatword "^f7k/d ^f" $gamehud_color "%3^n")) ]
	if (= $gamehud_showaccuracy 1) [ gamehud_string = (concat $gamehud_string (concatword "^f7acc ^f" $gamehud_color "%4%%^n")) ]
	if (= $gamehud_showflags 1) [ gamehud_string = (concat $gamehud_string (concatword "^f7flags ^f" $gamehud_color "%5^n")) ]
	if (= $gamehud_showfps 1) [ gamehud_string = (concat $gamehud_string (concatword "^f7fps ^f" $gamehud_color "%6^n")) ]
	gamehud = [result (if (! (isspectator $getclientnum)) [
		format $gamehud_string $getfrags $getdeaths (round (divf $getfrags (max (getdeaths) 1)) 0.1) $getaccuracy $getflags $getfps
	])]
]

gamehud_defaults = [
	gamehud_color = 2
	gamehud_showfrags = 1
	gamehud_showdeaths = 1
	gamehud_showkd = 1
	gamehud_showaccuracy = 1
	gamehud_showflags = 0
	gamehud_showfps = 0
	gamehud_apply
]

hud_gui_content = [
	guilist [
		guitext "color: "
		guiradio "^f0G" gamehud_color 0; guibar
		guiradio "^f1B" gamehud_color 1; guibar
		guiradio "^f2Y" gamehud_color 2; guibar
		guiradio "^f3R" gamehud_color 3; guibar
		guiradio "^f4D" gamehud_color 4; guibar
		guiradio "^f5M" gamehud_color 5; guibar
		guiradio "^f6O" gamehud_color 6; guibar
		guiradio "^f7W" gamehud_color 7; guibar
		guiradio "^f8C" gamehud_color 8
	]	
	guibar
	guicheckbox "frags" gamehud_showfrags
	guicheckbox "deaths" gamehud_showdeaths
	guicheckbox "k/d" gamehud_showkd
	guicheckbox "acc" gamehud_showaccuracy
	guicheckbox "flags" gamehud_showflags
	guicheckbox "fps" gamehud_showfps
	guibar
    guilist [
		guicheckbox "vanilla FPS counter" showfps
		guibar
        guicheckbox "wall clock" wallclock
        if $wallclock [
            guibar
            guicheckbox "24 hour" wallclock24
            guibar
            guicheckbox "seconds" wallclocksecs
        ]
    ]
	guibar
	guistayopen [
		guilist [
			guibutton "apply settings" [ gamehud_apply ]
			guibar
			guibutton "restore default" [ gamehud_defaults ]
		]
	]
]

if (! (getalias _uconf_setupcomplete_gamehud) 1) [
	gamehud_defaults
	_uconf_setupcomplete_gamehud = 1
]